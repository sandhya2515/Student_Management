<html>
	<head>
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
		<style>
			
			.container {
			    border: 2px solid #007bff;  
			    border-radius: 4px;         
			    margin-top:350px;
			    padding-bottom: -5px; 
			    padding-left: 15px;   
			    padding-right: 15px; 
			}
			h1{
				text-align:center;
				color:blue;
				margin-top:30px;
			}
			
		</style>
	</head>
	<body>
		<nav class="navbar navbar-expand-lg bg-body-tertiary" data-bs-theme="dark">
		  <div class="container-fluid">
		   
		    <div class="collapse navbar-collapse" id="navbarScroll">
		      <ul class="navbar-nav me-auto my-2 my-lg-0 navbar-nav-scroll" style="--bs-scroll-height: 100px;">
		        <li class="nav-item">
		          <a class="nav-link active" aria-current="page" href="/">Home</a>
		        </li>
				<li class="nav-item">
				   <a class="nav-link active" aria-current="page" href="reg">Register</a>
			   </li>
			   <li class="nav-item">
			       <a class="nav-link active" aria-current="page" href="success">View Data</a>
			   </li>
		      </ul>
		      <form class="d-flex" role="search">
		        <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
		        <button class="btn btn-outline-success" type="submit">Search</button>
		      </form>
		    </div>
		  </div>
		</nav>
		
		
		<div class="d-flex justify-content-center align-items-center vh-100">
		    <form id="reg_form" action="/save" method="post" class="w-50"> 
		        <div class="container">
					<h1>Registration Form</h1>
		            <div class="custom-border border-info p-4 rounded border-1">
						
							 <input type="hidden" id="id" name="id" th:value="${data?.id}">
						
		                <div class="row mb-3 justify-content-center">
		                    <div class="col-8"> 
		                        Enter Roll No:<input type="number" class="form-control" id="rollno" placeholder="Roll No" name="roll_no" th:value="${data?.roll_no}"  required min="1" title="Roll no must be positive">
		                    </div>
		                </div>
		                <div class="row mb-3 justify-content-center">
		                    <div class="col-8">
		                        Enter Name:
		                        <input type="text" class="form-control" id="name" placeholder="Name" name="name" th:value="${data?.name}" required minlength="2" pattern="^[A-Za-z\s]+$"   title="Name should Only contains alphabets and spaces">
		                    </div>
		                </div>
						<div class="row mb-3 justify-content-center">
							    <div class="col-8">
							        Enter Email:
							        <input type="email" class="form-control"  placeholder="Email" name="Email" th:value="${data?.email}" required title="Please enter correct email address">
							     </div>
					    </div>
						<div class="row mb-3 justify-content-center">
							 <div class="col-8">
							        Enter age:
							     <input type="number" class="form-control"  placeholder="Age" name="age" th:value="${data?.age}"  required min="1" max="200" title="Age should be positive">
						     </div>
						</div>
						<div class="row mb-3 justify-content-center">
							     <div class="col-8">
							         Enter gender:
									 <div class="form-check">
									     <input type="radio" class="form-check-input" id="male" name="gender" value="Male"  th:checked="${data?.gender}" required>
									      <label class="form-check-label" for="male">Male</label>
									 </div>
									                            
									 <div class="form-check">
									 <input type="radio" class="form-check-input" id="female" name="gender" value="Female" th:checked="${data?.gender}"  required>
									 <label class="form-check-label" for="female">Female</label>
									  </div>
							      </div>
					    </div>
		                <div class="row mb-3 justify-content-center">
		                    <div class="col-8">
		                        Enter Marks:
		                        <input type="number" class="form-control"  placeholder="Marks" name="marks" th:value="${data?.marks}"  required min="0" title="Marks shuld be positive">
		                    </div>
		                </div>
						<div class="row mb-3 justify-content-center">
							<div class="col-8">
							     Enter Previous Education:
								<input type="text" class="form-control"   placeholder="Previous Education"  name="previous_Edu" th:value="${data?.previous_Edu}"  required minlength="2" maxlength="100" title=" Previous Education must be between 2 to 100">
							 </div>   
						</div>
		                <div class="row mb-3 justify-content-center">
		                    <div class="col-8">
		                        Enter Contact:
		                        <input type="tel" class="form-control" placeholder="Contact" name="contact"  th:value="${data?.contact}" required pattern="^\d{10}$" title="Contact number should of 10 digit">
		                    </div>
		                </div>
		                <div class="row mb-3 justify-content-center">
		                    <div class="col-8">
		                        Enter Address:
		                        <input type="text" class="form-control" placeholder="Address" name="address"  th:value="${data?.address}"  required minlength="2" maxlength="100" title="Address must be between 2 t0 100">
		                    </div>
		                </div>
		                <div class="text-center">
		                    <input type="submit" name="Register" class="btn btn-success">
		                </div>
		            </div>
		        </div>
		    </form>
		</div>
		<script>
		        document.querySelector("form").addEventListener("submit", function(event) {
		            if (!this.checkValidity()) {
		                event.preventDefault();
		                alert("Please fill out all required fields correctly.");
		            }
		        });
				
				function submitForm() {
								            if (!validateForm()) return; 

								            const formData = new FormData(document.getElementById('reg_form'));
								            const id = $('#id').val();
								            let url, successMessage;

								            if (!id) {
								                url = '/save';
								                successMessage = 'Saved successfully!';
								            } else {
								                url = `/reg_form/edit/${id}`;
								                successMessage = 'Updated successfully!';
								            }

								            $.ajax({
								                url: url,
								                type: 'POST',
								                data: formData,
								                processData: false,
								                contentType: false,
								                success: function () {
								                    alert(successMessage);
								                    window.location.href = '/success';
								                },
								                error: function () {
								                    alert('Error saving. Please fill out all required fields correctly.');
								                }
								            });
								        }

			
		    </script>
			

	<body>
</html>